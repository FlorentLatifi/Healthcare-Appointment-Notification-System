2026-01-08 11:58:33.403 +01:00 [INF] Starting Healthcare API...
2026-01-08 11:58:33.659 +01:00 [INF] Healthcare API started successfully
2026-01-08 11:58:33.661 +01:00 [INF] Swagger UI available at: https://localhost:7039
2026-01-08 11:58:33.663 +01:00 [INF] Using Adapters: In-Memory Persistence + Console Notifications
2026-01-08 11:58:33.712 +01:00 [INF] Now listening on: http://localhost:5171
2026-01-08 11:58:33.715 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-08 11:58:33.717 +01:00 [INF] Hosting environment: Development
2026-01-08 11:58:33.717 +01:00 [INF] Content root path: C:\Users\flore\OneDrive\Desktop\Health\Healthcare-Appointment-Notification-System\Healthcare.AppointmentSystem\Healthcare.Presentation.API
2026-01-08 11:58:37.863 +01:00 [INF] Application is shutting down...
2026-01-08 12:06:33.061 +01:00 [INF] Starting Healthcare API...
2026-01-08 12:06:33.308 +01:00 [INF] Healthcare API started successfully
2026-01-08 12:06:33.310 +01:00 [INF] Swagger UI available at: https://localhost:7039
2026-01-08 12:06:33.312 +01:00 [INF] Using Adapters: In-Memory Persistence + Console Notifications
2026-01-08 12:06:33.366 +01:00 [INF] Now listening on: http://localhost:5171
2026-01-08 12:06:33.370 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-08 12:06:33.371 +01:00 [INF] Hosting environment: Development
2026-01-08 12:06:33.372 +01:00 [INF] Content root path: C:\Users\flore\OneDrive\Desktop\Health\Healthcare-Appointment-Notification-System\Healthcare.AppointmentSystem\Healthcare.Presentation.API
2026-01-08 12:06:52.347 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/index.html - null null
2026-01-08 12:06:52.520 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/index.html - 200 null text/html;charset=utf-8 174.5405ms
2026-01-08 12:06:52.699 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/swagger/v1/swagger.json - null null
2026-01-08 12:06:52.861 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.6876ms
2026-01-08 12:07:11.080 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/health - null null
2026-01-08 12:07:11.090 +01:00 [WRN] Failed to determine the https port for redirect.
2026-01-08 12:07:11.096 +01:00 [INF] Executing endpoint 'Health checks'
2026-01-08 12:07:11.107 +01:00 [INF] Memory usage is healthy: 7 MB
2026-01-08 12:07:13.378 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-08 12:07:13.653 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2026-01-08 12:07:13.668 +01:00 [INF] Database health check passed. Patient count: 0
2026-01-08 12:07:13.680 +01:00 [INF] Executed endpoint 'Health checks'
2026-01-08 12:07:13.683 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/health - 200 null text/plain 2602.9804ms
2026-01-08 12:07:13.738 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/favicon.ico - null null
2026-01-08 12:07:13.743 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/favicon.ico - 404 0 null 4.7731ms
2026-01-08 12:07:13.747 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5171/favicon.ico, Response status code: 404
2026-01-08 12:07:24.133 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/health/details - null null
2026-01-08 12:07:24.136 +01:00 [INF] Executing endpoint 'Health checks'
2026-01-08 12:07:24.139 +01:00 [INF] Memory usage is healthy: 18 MB
2026-01-08 12:07:24.153 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-08 12:07:24.158 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2026-01-08 12:07:24.161 +01:00 [INF] Database health check passed. Patient count: 0
2026-01-08 12:07:24.207 +01:00 [INF] Executed endpoint 'Health checks'
2026-01-08 12:07:24.209 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/health/details - 200 null application/json 75.9075ms
2026-01-08 12:08:04.482 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5171/api/v1/Appointments - application/json 106
2026-01-08 12:08:04.497 +01:00 [INF] CORS policy execution successful.
2026-01-08 12:08:04.499 +01:00 [INF] Executing endpoint 'Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API)'
2026-01-08 12:08:04.525 +01:00 [INF] Route matched with {action = "BookAppointment", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BookAppointment(Healthcare.Presentation.API.Requests.BookAppointmentRequest, System.Threading.CancellationToken) on controller Healthcare.Presentation.API.Controllers.AppointmentsController (Healthcare.Presentation.API).
2026-01-08 12:08:04.613 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-08 12:08:04.639 +01:00 [INF] Executed action Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API) in 108.7288ms
2026-01-08 12:08:04.641 +01:00 [INF] Executed endpoint 'Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API)'
2026-01-08 12:08:04.642 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5171/api/v1/Appointments - 400 null application/json; charset=utf-8 160.3646ms
2026-01-08 12:08:08.216 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5171/api/v1/Appointments - application/json 106
2026-01-08 12:08:08.220 +01:00 [INF] CORS policy execution successful.
2026-01-08 12:08:08.221 +01:00 [INF] Executing endpoint 'Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API)'
2026-01-08 12:08:08.223 +01:00 [INF] Route matched with {action = "BookAppointment", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BookAppointment(Healthcare.Presentation.API.Requests.BookAppointmentRequest, System.Threading.CancellationToken) on controller Healthcare.Presentation.API.Controllers.AppointmentsController (Healthcare.Presentation.API).
2026-01-08 12:08:08.230 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2026-01-08 12:08:08.232 +01:00 [INF] Executed action Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API) in 6.4363ms
2026-01-08 12:08:08.234 +01:00 [INF] Executed endpoint 'Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API)'
2026-01-08 12:08:08.235 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5171/api/v1/Appointments - 400 null application/json; charset=utf-8 18.8587ms
2026-01-08 12:09:04.701 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5171/api/v1/Appointments - application/json 127
2026-01-08 12:09:04.704 +01:00 [INF] CORS policy execution successful.
2026-01-08 12:09:04.705 +01:00 [INF] Executing endpoint 'Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API)'
2026-01-08 12:09:04.707 +01:00 [INF] Route matched with {action = "BookAppointment", controller = "Appointments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BookAppointment(Healthcare.Presentation.API.Requests.BookAppointmentRequest, System.Threading.CancellationToken) on controller Healthcare.Presentation.API.Controllers.AppointmentsController (Healthcare.Presentation.API).
2026-01-08 12:09:04.718 +01:00 [INF] Booking appointment for Patient 1 with Doctor 1 at "2026-01-12T11:07:52.1580000Z"
2026-01-08 12:09:04.936 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CreatedAt], [p].[DateOfBirth], [p].[Email], [p].[FirstName], [p].[Gender], [p].[IsActive], [p].[LastName], [p].[ModifiedAt], [p].[PhoneNumber], [p].[Address_City], [p].[Address_Country], [p].[Address_PostalCode], [p].[Address_State], [p].[Address_Street]
FROM [Patients] AS [p]
WHERE [p].[Id] = @__id_0
2026-01-08 12:09:04.941 +01:00 [WRN] Failed to book appointment: Patient with ID 1 not found.
2026-01-08 12:09:04.944 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Healthcare.Presentation.API.Responses.ApiResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-08 12:09:04.951 +01:00 [INF] Executed action Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API) in 242.1985ms
2026-01-08 12:09:04.954 +01:00 [INF] Executed endpoint 'Healthcare.Presentation.API.Controllers.AppointmentsController.BookAppointment (Healthcare.Presentation.API)'
2026-01-08 12:09:04.955 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5171/api/v1/Appointments - 400 null application/json; charset=utf-8 254.1402ms
2026-01-08 12:10:28.577 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5171/api/v1/Patients - application/json 305
2026-01-08 12:10:28.580 +01:00 [INF] CORS policy execution successful.
2026-01-08 12:10:28.581 +01:00 [INF] Executing endpoint 'Healthcare.Presentation.API.Controllers.PatientsController.CreatePatient (Healthcare.Presentation.API)'
2026-01-08 12:10:28.586 +01:00 [INF] Route matched with {action = "CreatePatient", controller = "Patients"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePatient(Healthcare.Presentation.API.Requests.CreatePatientRequest, System.Threading.CancellationToken) on controller Healthcare.Presentation.API.Controllers.PatientsController (Healthcare.Presentation.API).
2026-01-08 12:10:28.606 +01:00 [INF] Creating patient: florentlatifi123@gmail.com
2026-01-08 12:10:28.619 +01:00 [WRN] Failed to create patient: An unexpected error occurred: The LINQ expression 'DbSet<Patient>()
    .Where(p => p.Email.Value == __email_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
2026-01-08 12:10:28.621 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Healthcare.Presentation.API.Responses.ApiResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-08 12:10:28.625 +01:00 [INF] Executed action Healthcare.Presentation.API.Controllers.PatientsController.CreatePatient (Healthcare.Presentation.API) in 36.7825ms
2026-01-08 12:10:28.627 +01:00 [INF] Executed endpoint 'Healthcare.Presentation.API.Controllers.PatientsController.CreatePatient (Healthcare.Presentation.API)'
2026-01-08 12:10:28.629 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5171/api/v1/Patients - 400 null application/json; charset=utf-8 52.0379ms
2026-01-08 12:12:55.768 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5171/api/v1/Doctors - application/json 258
2026-01-08 12:12:55.772 +01:00 [INF] CORS policy execution successful.
2026-01-08 12:12:55.773 +01:00 [INF] Executing endpoint 'Healthcare.Presentation.API.Controllers.DoctorsController.CreateDoctor (Healthcare.Presentation.API)'
2026-01-08 12:12:55.778 +01:00 [INF] Route matched with {action = "CreateDoctor", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDoctor(Healthcare.Presentation.API.Requests.CreateDoctorRequest, System.Threading.CancellationToken) on controller Healthcare.Presentation.API.Controllers.DoctorsController (Healthcare.Presentation.API).
2026-01-08 12:12:55.809 +01:00 [INF] Creating doctor: ali@mail.com
2026-01-08 12:12:55.815 +01:00 [ERR] Failed to create doctor
System.InvalidOperationException: The LINQ expression 'DbSet<Doctor>()
    .Where(d => d.Email.Value == __email_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at Healthcare.Adapters.Persistence.EntityFramework.Repositories.EFCoreDoctorRepository.GetByEmailAsync(String email, CancellationToken cancellationToken) in C:\Users\flore\OneDrive\Desktop\Health\Healthcare-Appointment-Notification-System\Healthcare.AppointmentSystem\Healthcare.Adapters\Persistence\EntityFramework\Repositories\EFCoreDoctorRepository.cs:line 42
   at Healthcare.Presentation.API.Controllers.DoctorsController.CreateDoctor(CreateDoctorRequest request, CancellationToken cancellationToken) in C:\Users\flore\OneDrive\Desktop\Health\Healthcare-Appointment-Notification-System\Healthcare.AppointmentSystem\Healthcare.Presentation.API\Controllers\DoctorsController.cs:line 62
2026-01-08 12:12:55.853 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Healthcare.Presentation.API.Responses.ApiResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-08 12:12:55.855 +01:00 [INF] Executed action Healthcare.Presentation.API.Controllers.DoctorsController.CreateDoctor (Healthcare.Presentation.API) in 75.0262ms
2026-01-08 12:12:55.857 +01:00 [INF] Executed endpoint 'Healthcare.Presentation.API.Controllers.DoctorsController.CreateDoctor (Healthcare.Presentation.API)'
2026-01-08 12:12:55.858 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5171/api/v1/Doctors - 400 null application/json; charset=utf-8 89.998ms
2026-01-08 12:14:17.904 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/health/ready - null null
2026-01-08 12:14:17.908 +01:00 [INF] Executing endpoint 'Health checks'
2026-01-08 12:14:17.969 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-08 12:14:17.974 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Patients] AS [p]
2026-01-08 12:14:17.976 +01:00 [INF] Database health check passed. Patient count: 0
2026-01-08 12:14:17.978 +01:00 [INF] Executed endpoint 'Health checks'
2026-01-08 12:14:17.979 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/health/ready - 200 null text/plain 75.0542ms
2026-01-08 12:14:22.646 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5171/health/live - null null
2026-01-08 12:14:22.649 +01:00 [INF] Executing endpoint 'Health checks'
2026-01-08 12:14:22.652 +01:00 [INF] Executed endpoint 'Health checks'
2026-01-08 12:14:22.654 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5171/health/live - 200 null text/plain 7.5099ms
